<html>
    <head>
        <title> Library 3D-Elements Test </title>

        <script src="3d-elements/vector3d.js"></script>
        <script src="3d-elements/matrix.js"></script>
        <script src="3d-elements/matrix4by4.js"></script>
        <script src="3d-elements/matrix4by3.js"></script>
        <script src="3d-elements/matrix3by3.js"></script>
        <script src="3d-transforms/applier.js"></script>
        <script src="3d-transforms/rotate.js"></script>
        <script src="3d-transforms/scale.js"></script>
        <script src="3d-transforms/translate.js"></script>
        <script src="3d-elements/point2d.js"></script>
        <script src="camera/perspectivecamera.js"></script>

        <script src="https://unpkg.com/vue@3"></script>
    </head>

    <body>
        <div id="app">
            <div>
                <svg :width="width" :height="height" :view-box.camel="viewbox" style="outline: 2px solid red;">
                    <template v-for="rect in rects">
                        <polygon :points="mergePoints(rect.points)" style="fill:green;stroke:black;stroke-width:1" />
                    </template>
                </svg>
            </div>

            <div>
                <p>
                    Camera Location: (<span>{{cameraX.value}}</span>, <span>{{cameraY.value}}</span>, <span>{{cameraZ.value}}</span>)
                </p>
                <p>
                    <span>CameraX: </span> <input type="range" :min="cameraX.min" :max="cameraX.max" v-model="cameraX.value" /> <br>
                    <span>CameraX: </span> <input type="range" :min="cameraY.min" :max="cameraY.max" v-model="cameraY.value" /> <br>
                    <span>CameraX: </span> <input type="range" :min="cameraZ.min" :max="cameraZ.max" v-model="cameraZ.value" /> <br>
                </p>
                <p>
                    Look Direction: (<span>{{lookX.value}}</span>, <span>{{lookY.value}}</span>, <span>{{lookZ.value}}</span>)
                </p>
                <p>
                    <span>LookX: </span> <input type="range" :min="lookX.min" :max="lookX.max" v-model="lookX.value" /> <br>
                    <span>LookX: </span> <input type="range" :min="lookY.min" :max="lookY.max" v-model="lookY.value" /> <br>
                    <span>LookX: </span> <input type="range" :min="lookZ.min" :max="lookZ.max" v-model="lookZ.value" /> <br>
                </p>
            </div>
        </div>

        <script>
            const viewboxwidth = 200;
            const viewboxheight = 200;

        </script>

        <script>
            const { createApp } = Vue;

            createApp({
                data() {
                    return {
                        viewboxwidth: viewboxwidth,
                        viewboxheight: viewboxheight,

                        width: 300,
                        height: 300,

                        cameraX: {
                            value: 0,
                            min: -100,
                            max: 100,
                        },
                        cameraY: {
                            value: 0,
                            min: -100,
                            max: 100,
                        },
                        cameraZ: {
                            value: 100,
                            min: 10,
                            max: 190,
                        },

                        lookX: {
                            value: 0,
                            min: -100,
                            max: 100,
                        },
                        lookY: {
                            value: 0,
                            min: -100,
                            max: 100,
                        },
                        lookZ: {
                            value: -20,
                            min: -39,
                            max: -1,
                        },

                        rects: [
                            {
                                points: [
                                    {
                                        x: 20,
                                        y: 20,
                                    },
                                    {
                                        x: 40,
                                        y: 20,
                                    },
                                    {
                                        x: 40,
                                        y: 40,
                                    },
                                    {
                                        x: 20,
                                        y: 40,
                                    },
                                ],
                            },
                        ],
                    };
                },
                methods: {
                    mergePoints(points) {
                        let res = '';
                        for (const point of points) {
                            res += String(point.x) + ',' + String(point.y) + ' ';
                        }
                        return res;
                    },
                },
                computed: {
                    viewbox() {
                        const w = this.viewboxwidth;
                        const h = this.viewboxheight;
                        return String(0) + ' ' + String((w - h) / 2) + ' ' + String(w) + ' ' + String((w + h) / 2);
                    },
                },
            }).mount('#app');
        </script>
    </body>
</html>